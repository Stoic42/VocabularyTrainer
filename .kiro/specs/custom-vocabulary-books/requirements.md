# 自定义词库功能需求文档

## 介绍

自定义词库功能允许学生创建和管理个人词汇集合，将日常学习中遇到的生词添加到个人学习系统中。该功能参考Anki的fastwordquery功能，为学生输入的词汇自动生成标准词卡，并集成到现有的SRS（间隔重复系统）学习循环中。

学生可以根据不同学习场景（如听力、阅读、课堂学习等）创建多个自定义词库，每个词库都独立管理，支持灵活的学习安排。

## 需求

### 需求1：词库创建与管理

**用户故事：** 作为学生，我希望能够创建和管理多个自定义词库，以便按照不同的学习场景组织我的生词。

#### 验收标准

1. WHEN 学生访问词库管理页面 THEN 系统 SHALL 显示所有已创建的自定义词库列表
2. WHEN 学生点击"创建新词库"按钮 THEN 系统 SHALL 提供词库创建表单，包含词库名称、描述和分类字段
3. WHEN 学生提交词库创建表单 THEN 系统 SHALL 验证输入信息并创建新的词库记录
4. WHEN 学生选择编辑词库 THEN 系统 SHALL 允许修改词库名称、描述和分类信息
5. WHEN 学生选择删除词库 THEN 系统 SHALL 提示确认并删除词库及其包含的所有词汇
6. WHEN 词库名称重复 THEN 系统 SHALL 提示错误信息并要求重新输入

### 需求2：词汇添加与词卡生成

**用户故事：** 作为学生，我希望能够快速添加生词到自定义词库中，并自动生成标准化的学习词卡。

#### 验收标准

1. WHEN 学生在词库中添加新词汇 THEN 系统 SHALL 提供词汇输入界面，支持单词、短语和句子输入
2. WHEN 学生输入词汇后 THEN 系统 SHALL 自动查询词汇的标准信息（音标、释义、例句等）
3. WHEN 系统找到词汇标准信息 THEN 系统 SHALL 自动生成包含音标、释义、例句的标准词卡
4. WHEN 系统无法找到词汇信息 THEN 系统 SHALL 允许学生手动输入释义和例句
5. WHEN 词卡生成完成 THEN 系统 SHALL 将词汇添加到指定词库中，初始熟练度设为最低级别
6. WHEN 学生添加重复词汇 THEN 系统 SHALL 提示词汇已存在并询问是否更新信息
7. WHEN 学生批量添加词汇 THEN 系统 SHALL 支持文本粘贴或文件导入方式

### 需求3：SRS学习循环集成

**用户故事：** 作为学生，我希望自定义词库中的词汇能够按照SRS算法进行学习安排，以便有效记忆这些生词。

#### 验收标准

1. WHEN 词汇被添加到自定义词库 THEN 系统 SHALL 将词汇初始熟练度设置为最低级别（新词）
2. WHEN 学生开始学习自定义词库 THEN 系统 SHALL 按照SRS算法安排词汇复习时间
3. WHEN 学生完成词汇学习 THEN 系统 SHALL 根据学习表现调整词汇熟练度和下次复习时间
4. WHEN 词汇达到熟练级别 THEN 系统 SHALL 延长复习间隔并降低出现频率
5. WHEN 学生学习表现不佳 THEN 系统 SHALL 重置词汇熟练度并增加复习频率
6. WHEN 多个词库包含相同词汇 THEN 系统 SHALL 统一管理该词汇的学习进度

### 需求4：学习模式与统计

**用户故事：** 作为学生，我希望能够选择不同的学习模式来学习自定义词库，并查看学习进度统计。

#### 验收标准

1. WHEN 学生选择学习自定义词库 THEN 系统 SHALL 提供多种学习模式（认识模式、拼写模式、听写模式）
2. WHEN 学生选择特定学习模式 THEN 系统 SHALL 按照该模式的规则进行词汇测试
3. WHEN 学生完成学习会话 THEN 系统 SHALL 记录学习时间、正确率和学习词汇数量
4. WHEN 学生查看学习统计 THEN 系统 SHALL 显示词库学习进度、熟练度分布和学习历史
5. WHEN 学生查看词汇详情 THEN 系统 SHALL 显示该词汇的学习次数、正确率和熟练度变化
6. WHEN 系统生成学习报告 THEN 系统 SHALL 包含词库维度的学习分析和建议

### 需求5：词库共享与导入导出

**用户故事：** 作为学生，我希望能够导出我的自定义词库，并导入其他人分享的词库，以便扩展我的学习内容。

#### 验收标准

1. WHEN 学生选择导出词库 THEN 系统 SHALL 生成包含词汇信息的标准格式文件（CSV/JSON）
2. WHEN 学生选择导入词库 THEN 系统 SHALL 支持标准格式文件的解析和导入
3. WHEN 导入过程中遇到重复词汇 THEN 系统 SHALL 提供合并或跳过选项
4. WHEN 导入文件格式错误 THEN 系统 SHALL 提示具体错误信息并提供格式说明
5. WHEN 学生分享词库 THEN 系统 SHALL 生成分享链接或二维码供其他用户导入
6. WHEN 导入导出操作完成 THEN 系统 SHALL 显示操作结果统计（成功/失败词汇数量）

### 需求6：移动端适配与离线支持

**用户故事：** 作为学生，我希望能够在移动设备上管理和学习自定义词库，并支持离线学习功能。

#### 验收标准

1. WHEN 学生在移动设备上访问系统 THEN 界面 SHALL 自适应移动端屏幕尺寸
2. WHEN 学生在移动端添加词汇 THEN 系统 SHALL 提供便捷的输入方式（语音输入、拍照识别）
3. WHEN 网络连接不稳定 THEN 系统 SHALL 支持离线模式下的词汇学习
4. WHEN 学生离线学习 THEN 系统 SHALL 在网络恢复后同步学习进度
5. WHEN 学生使用语音输入 THEN 系统 SHALL 准确识别词汇并自动填入输入框
6. WHEN 学生拍照识别文本 THEN 系统 SHALL 提取文本中的词汇并支持批量添加