# 音频路径更新工具

## 功能说明

这个工具用于重新建立初中英语单词的英式发音和美式发音到对应剑桥发音音频文件的映射。它通过读取`初中 乱序 绿宝书.txt`文件中的`[sound:xxx]`标签，提取音频文件路径，然后更新数据库中的音频路径字段。

## 主要功能

1. **加载音频路径映射**：从TXT文件中提取`[sound:xxx]`标签，建立单词到音频文件的映射关系。
2. **更新数据库音频路径**：将提取的音频路径更新到数据库中对应单词的`audio_path_uk`和`audio_path_us`字段。
3. **验证音频文件存在性**：检查数据库中的音频路径是否对应到实际存在的文件，并统计结果。

## 使用方法

1. 确保`初中 乱序 绿宝书.txt`文件位于`wordlists/junior_high/`目录下。
2. 确保音频文件位于`wordlists/junior_high/media/`目录下。
3. 运行脚本：

```bash
python update_audio_paths.py
```

## 运行结果

脚本运行后会显示以下信息：

1. 从TXT文件加载的音频路径数量
2. 成功更新的单词数量
3. 未找到映射的单词列表（最多显示10个）
4. 音频文件验证结果，包括：
   - 英音文件存在数量
   - 英音文件缺失数量
   - 美音文件存在数量
   - 美音文件缺失数量
   - 缺失的音频文件列表（如果有）

## 注意事项

1. 脚本只会更新初中英语词汇（`book_name = '初中英语词汇'`）的单词音频路径。
2. 对于在TXT文件中找不到对应音频路径的单词，脚本会列出这些单词，但不会修改它们在数据库中的音频路径。
3. 脚本会验证更新后的音频路径是否对应到实际存在的文件，如果有缺失的文件，会列出这些文件。

## 技术细节

1. 音频路径格式：`cambridge-xxxxxxxx-xxxxxxxx-xxxxxxxx-xxxxxxxx-xxxxxxxx.mp3`
2. 数据库表结构：
   - `Words`表包含`audio_path_uk`和`audio_path_us`字段，用于存储音频文件路径
3. 音频文件存储位置：`wordlists/junior_high/media/`目录