# Lumi单词训练营：项目状态报告与发展蓝图

文件版本： V2.1

更新日期： 2025年6月24日

负责人： Stoic42

核心理念更新： 基于对词汇记忆科学的深入研究，本项目将深度融合间隔重复、位置效应、助记法、游戏化及创造性使用等原则，旨在打造一个不仅高效，更符合认知科学的学习伙伴。

## 一、 项目核心需求 (Product Requirements)

（此部分保持不变，已全面覆盖）

|   |   |
|---|---|
|**模块 (Module)**|**核心需求 (Core Requirements)**|
|**1. 核心学习闭环**|提供拼写/听写等多种测试模式；实现自动批改与即时反馈；精确记录每一次的错误。|
|**2. 内容与数据管理**|支持“词书-单元-单词”的多层级结构；能从多种格式（CSV/TXT）导入并整合数据；存储单词的完整信息（音标、例句、多来源释义、多种发音等）。|
|**3. 用户与角色系统**|区分学生/管理员(Admin)角色；提供安全的用户注册、登录与会话管理；实现用户数据（错题、进度）的完全隔离。|
|**4. 体验与交互 (UI/UX)**|提供美观、友好、易用的操作界面；Lumi吉祥物应能根据学习状态提供丰富的情感反馈与动画；提供高质量的音频播放体验。|
|**5. 科学记忆引擎**|基于艾宾浩斯遗忘曲线，构建间隔重复系统（SRS），为每个用户智能推送定制化的复习与学习计划。|
|**6. 智能与数据分析**|Admin后台能查看所有学生的整体学情报告；利用大语言模型（LLM）API对学生的错题模式进行诊断，并提供个性化建议；利用AI生成新颖的练习模式。|
|**7. 部署与扩展**|支持在本地（包括低性能Windows）部署运行；具备部署到云服务器的能力；为未来扩展至独立APP或微信小程序提供穩固的API基础。|

## 二、 当前项目完成度 (Current Status)

（此部分保持不变，成果斐然）

- **项目状态：** **第一阶段 (核心MVP) 已完成并超额交付。**
    

|            |                                                                                   |
| ---------- | --------------------------------------------------------------------------------- |
| **模块**     | **✅ 完成情况**                                                                        |
| **环境与后端**  | 已建立稳定、独立的Anaconda开发环境；Flask后端服务、数据库连接、以及多个核心API均已开发并调通。                           |
| **核心测试闭环** | 已实现 `选择列表` -> `答题` -> `提交` -> `批改` -> `结果反馈` 的完整流程。                               |
| **数据导入**   | 已实现从TXT/CSV导入数据到SQLite数据库的自动化脚本，并初步解决了多数据源合并问题。                                   |
| **用户体验**   | 已实现精美的UI设计、Lumi吉祥物即时反馈、英/美双语音频播放、自动播放选项及快捷键支持。                                    |
| **API服务**  | 已开发出 `/api/questions`, `/api/submit`, `/api/lists`, `/api/error-history` 等多个核心接口。 |

## 三、 已知问题与技术债 (Known Issues & Tech Debt)

（此部分保持不变，问题清晰）

|         |             |                                                                                        |                                                                                            |
| ------- | ----------- | -------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------ |
| **#**   | **问题/技术债**  | **表现**                                                                                 | **解决方案（后续处理）**                                                                             |
| **1**   | **数据模型待优化** | **多条记录**：`center/centre` 等单词在数据源中可能是多条记录；**多义项冲突**：不同词典对同一单词有不同释义，当前扁平的`Words`表无法优雅处理。 | **长期方案**：重构数据库，建立一个核心`WordSpelling`表，以及关联的`WordDefinition`表，用`source`字段区分来源，实现真正的“一词多义”存储。 |
| **2**   | **数据字段混杂**  | `meaning_cn`列中混入了过去式/分词等语法形态，不利于程序化处理。                                                 | **中期方案**：升级`Words`表，增加专门的`form_past`等列；修改`import_data.py`脚本，在导入时进行“数据清洗”，自动分离这些信息。         |
| **3. ** | **导入脚本强耦合** | `import_data.py`目前强依赖于特定数据源的列顺序。                                                       | **近期方案**：**统一数据源标准**。将所有词库预处理成一种**标准格式的CSV**，然后重写一个简单、通用的导入脚本，实现“一次编写，到处导入”。               |
| **4. ** | **静态路径硬编码** | 部分URL路径（如音频）在`app.py`中被部分写死。                                                           | **近期方案**：优化`app.py`，将路径前缀作为配置项，或通过更智能的方式动态生成，以支持未来更多的词库。                                   |

## 四、 下一步开发节奏与规划 (Roadmap) - **融入科学记忆法**

我们的开发节奏将紧密围绕科学记忆原则，确保每个功能都有理论支撑。

### **阶段一：周二交付冲刺 — “多用户教学原型”**

**目标：** 快速迭代，实现核心的多用户与多内容管理，为教学场景做准备。

|            |                 |                                                                                                                                          |          |
| ---------- | --------------- | ---------------------------------------------------------------------------------------------------------------------------------------- | -------- |
| **优先级**    | **任务**          | **解决思路**                                                                                                                                 | **状态**   |
| **1 (最高)** | **多用户 & 多词书支持** | **DB**: 新增`Users`, `Books`表。**后端**: 开发`/login`, `/register`, `/api/books`等接口，改造现有API以支持`student_id`。**前端**: 开发登录页，主页增加“学生/词书/单元”三级联动选择器。 | **待办**   |
| **2 (高)**  | **错误历史页面**      | **后端API已完成！** **前端**: 创建`error_history.html`，用`fetch`获取并展示数据，提供按`List`筛选、按日期排序等功能。                                                       | **后端完成** |

### **阶段二：月底前 (至6.30) — “AI与SRS奠基”**

**目标：** 引入产品的“大脑”——核心的智能算法和AI能力。

| **优先级**    | **任务**           | **科学依据/启示**      | **解决思路**                                                                                    | **状态** |
| ---------- | ---------------- | ---------------- | ------------------------------------------------------------------------------------------- | ------ |
| **1 (最高)** | **抗遗忘曲线(SRS)基础** | **间隔重复 & 测试效应**  | **DB**: 新增`StudentWordProgress`表。**后端**: 修改`/submit`接口，在批改后更新此表（答对增加间隔，答错重置）。               | **待办** |
| **2 (高)**  | **出题顺序优化**       | **位置效应 (首因/近因)** | **后端**: 改造`/api/questions`接口，在生成测试列表时，策略性地将重要或难记的词放在开头和结尾。                                  | **待办** |
| **3 (中)**  | **集成AI助记法**      | **助记法技术 & AI生成** | **后端**: 封装调用LLM的函数。**前端**: 在答题页或错题本中增加“Lumi帮我记”按钮，点击后向后端请求，获取并展示AI为当前单词生成的“奇异联想故事”或“关键词口诀”。 | **待办** |
| **4 (中)**  | **部署到学校电脑**      | -                | 将项目打包，在目标电脑安装Anaconda环境并运行。                                                                 | **待办** |
暑假：网页
尽早使用上APP
烛梦单词 logo
先用安全的APP
内部学员 特别是少儿版 后期才是所有人都能用
非会员版本和会员版本有区别 （AI生成报告的功能）

8月回来后：1. 少儿体系（优先） 2. APP

### **阶段三：七月及以后 — "功能深化与产品化"""

**目标：** 全面提升学习体验，丰富练习模式，并为商业化做准备。

| **任务**          | **科学依据/启示**              | **解决思路**                                                                                              |
| --------------- | ------------------------ | ----------------------------------------------------------------------------------------------------- |
| **全面实现SRS**     | **间隔重复 & 检索难度**          | **后端**: 重构出题逻辑，实现真正根据`next_review_date`来智能推送复习词+新词的混合列表。**前端**: 可能需要展示"今日待复习"等信息。                     |
| **开发"创造性使用"模块** | **创造性使用 & 体验式学习**        | 特别是针对特别难的题目，开发新练习模式：1. **AI故事填空**：AI生成一个挖掉了目标单词的小故事，让学生填空。 2. **情境对话**：AI模拟一个场景（如点餐、问路），让学生用所学词汇完成对话。 |
| **游戏化机制增强**     | **游戏化学习 (Gamification)** | 基于您的想法，用"词汇小游戏"（如单词匹配、快速选择）来填充AI分析时的等待时间，并设计"连对奖励"等机制，由Lumi来执行，增强学习动机。                                |
| **Admin后台开发**   | **数据分析与反馈**              | 开发管理员专属页面，可视化展示所有学生的学习进度、高频错词、整体正确率等，为教学决策提供数据支持。                                                     |
| **年龄适配学习策略**    | **不同年龄段认知特点**            | 1. **儿童**: 多感官互动、游戏化学习、歌曲记忆。2. **青少年**: 结构化学习、策略指导、挑战性任务。3. **成人**: 高效实用、深度理解、自适应调整。                  |
| **产品化 (8.1后)**  | **部署与扩展**                | 将应用部署到云服务器，并基于现有API开发**APP**或**微信小程序**版本。                                                             |
您好！这个目标非常明确，也很有价值——在您离开前，为机构留下一份功能丰富、内容充实，并且**易于部署**的宝贵资产。在6月30日之前完成这个任务是完全可行的，我们需要一个清晰的作战计划。

这份计划的核心是“**数据先行，功能跟上，打包部署**”。

---

### **“6.30交付”最终冲刺计划**

我们将整个任务分解为四个主要步骤：

#### **第一步：确立“黄金标准”—— 最终的CSV数据格式**

这是所有工作的基础。我们需要定义一个所有词库最终都要转换成的标准格式。根据我们之前的脚本，这个格式的表头（Header）是：

'list_id', 'spelling', 'ipa', 'pos_and_meaning', 'definition_en', 'example_en', 'notes', 'audio_path_uk', 'audio_path_us'

**您的任务**：确认这份表头是否包含了您所有词库中的关键信息。一旦确认，这就是我们未来所有数据处理的统一目标。

#### **第二步：成为“数据工程师”—— 批量处理所有词库 (预计2-3天)**

这是本次冲刺中**最耗时、也最关键**的工作。您需要将至少四本词书（初中、高中、雅思、托福等）全部转换为我们上面定义的“标准CSV格式”。

- **您的任务**:
    1. 为您手上的每一本词书（无论是`.txt`, `.csv`还是其他格式），都适配或创建一个类似我们之前写的 `convert_..._to_csv.py` 的转换脚本。
    2. 运行这些脚本，为每一本词书都生成一个对应的、干净的“标准CSV文件”。例如：`junior_high_standard.csv`, `senior_high_standard.csv`, `ielts_standard.csv`...
    3. **这个过程是纯粹的数据处理，不需要修改主应用（`app.py`）**。

#### **第三步：升级“应用核心”—— 实现完整的多词书功能 (预计1天)**

当所有数据都标准化之后，我们就可以来升级我们的应用，让它能够理解和展示“词书”这个概念。这正是我们之前规划的“周二交付”任务。

- **您的任务**:
    1. **数据库 (`import_data.py`)**:
        - 确保 `Books`, `WordLists`, `Words` 这三张表被正确创建。
        - 升级导入脚本，让它能够读取您所有的“标准CSV文件”，并能根据文件名或内容，自动创建“词书”和“单元”，并将正确的`book_id`和`list_id`存入数据库。
    2. **后端 (`app.py`)**:
        - 确保您拥有 `GET /api/books` (获取所有词书) 和 `GET /api/lists?book_id=X` (根据词书获取单元列表) 这两个API。
    3. **前端 (`index.html`)**:
        - 实现**“二级联动”下拉菜单**：用户先选择词书，然后单元列表下拉菜单会自动更新。

#### **第四步：一键“魔法”—— 打包成免安装的.exe程序 (预计半天)**

对于“用最简单的方式安装到学校的电脑上”这个需求，最佳答案是使用一个名为 **PyInstaller** 的工具。

- **它能做什么？**
    
    - 它可以将您的整个Flask应用（包括Python解释器、所有库、HTML模板、静态文件、甚至数据库文件）全部打包成一个**单独的 `.exe` 可执行文件**。
- **如何使用？**
    
    - 在学校的电脑上，您不需要安装Anaconda或Python。您只需要把这个`.exe`文件和包含您词库数据、音频文件的文件夹一起复制过去，然后**双击运行`.exe`文件**，您的单词服务器就启动了！这对于非技术人员来说极其友好。
- **您的任务**:
    
    1. 在您的开发环境中（激活了Conda环境的CMD里），安装PyInstaller：
        
        DOS
        
        ```
        pip install pyinstaller
        ```
        
    2. 在项目的根目录（和`app.py`同级），运行以下打包命令：
        
        DOS
        
        ```
        pyinstaller --noconsole --add-data "templates;templates" --add-data "assets;assets" --add-data "wordlists;wordlists" --add-data "vocabulary.db;." app.py
        ```
        
        - **命令解释**:
            - `--noconsole`: 运行时不显示黑色的命令行窗口。
            - `--add-data "源;目标"`: 将文件夹或文件打包进去。我们把`templates`, `assets`, `wordlists`文件夹和`vocabulary.db`数据库文件都打包了。
    3. 命令成功后，会在一个名为`dist`的新文件夹里，找到一个`app.exe`文件。这就是您的“绿色免安装版”应用。

---

### **建议的冲刺时间表**

- **今天 & 明天 (周三/周四)**: **数据处理日**。集中所有精力完成**第二步**，将您所有的词库文件全部转换为标准CSV格式。
- **后天 (周五)**: **功能开发日**。完成**第三步**，实现应用内的多词书选择功能，并进行充分测试。
- **大后天 (周六)**: **打包与测试日**。完成**第四步**，生成`.exe`文件，并在您自己的电脑上测试它是否能独立运行。
- **周日**: 预留的缓冲时间，用于解决打包过程中可能遇到的问题或进行最后的微调。

这是一个清晰且扎实的计划。最繁重的工作在于前期的“数据标准化”，一旦完成，后续的开发和部署就会非常顺利。您完全有能力在出发前完成这个重要的里程碑。

让我们从“数据工程师”的角色开始，处理您的第一本新词库吧！