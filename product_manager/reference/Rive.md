同样是 UI 动画，多邻国为什么放弃 Lottie 转投 Rive？ 多邻国的角色动画为什么还能张嘴？
给大家分享一篇文章，讲了多邻国是怎么使用 Rive 来集成到他们的工作流中的。艺术与技术相遇：让我们的角色栩栩如生的下一步Duolingo 演员现在在您的课程中对口型！Jasmine Vahidsafa 茉莉花·瓦希萨法Kevin Lenzo 凯文·伦佐cover_Art-meets-technology-the-next-step-in-bringing-our-characters-to-life.png在为每个角色开发个人声音后，我们考虑了如何让它们栩栩如生——超越我们现有的具有闲置行为的动画。我们希望确保我们的角色是活泼的、吸引人的学习者学习伙伴！第一：要制作动画，需要大量的嘴部动作！我们在 100 多门课程中教授 40 多种语言，每门课程都包含数千个句子和课程，因此为我们的 10 个世界角色手动制作嘴唇运动动画是完全不可能的。我们需要一些可扩展的功能，以考虑每个角色的任何可能的口型组合，以与声音相对应，同时保持文件大小足够小，以便在 Android、iOS 和 Web 上运行。此外，我们希望确保我们的动画质量在此过程中不受影响！我们认为答案可能在于游戏引擎的替代方案 — 它可以帮助我们获取有限数量的资产，并将其转换为几乎无限数量的组合。这就是我们了解Rive 的方式！什么是 Rive？Rive 是一种基于 Web 的工具，用于制作实时交互式动画和设计，类似于游戏引擎。它似乎解决了我们的许多问题：文件大小紧凑，并与 Duolingo 的应用程序架构巧妙地插入在一起，并且从动画师到工程师的交接是无缝的。但让我们印象深刻的是 Rive 的状态机：将动画（“状态”）连接在一起的逻辑的可视化表示。这意味着它允许我们以编程方式控制调用哪些动画状态、如何调用它们，以及它们如何过渡和混合在一起。State Machine 强大的系统使该项目能够在大规模上实现。我们知道 Rive 是让对口型栩栩如生的正确工具！2022-10_Viseme_Project_Image00_Rive.png窥探 Rive！语音技术的魔力为了进行嘴巴动作，我们需要详细地了解语音中发生的事情。当我们构建文本到语音转换的语音时，我们使用的解决方案并没有为我们提供发音和时间安排，但我们有一个丰富的语音技术生态系统，我们为语言学习建立了一个。为了创建准确的动画，我们生成语音，通过我们内部的语音识别和发音模型运行它，并获取每个单词和音素（语音）的时间。每个声音都映射到我们根据语言特征设计的一组视觉表示或发音嘴型上。借助这些功能，我们建立了一个工厂来生成课程内容所需的所有发音嘴型计时。当然，我们还需要确保它是正确的，并将信息发送到正确的位置，为数百万用户提供服务。我们建立了工具和流程，不仅是为了生成材料，而且是为了在需要时进行审计和纠正。设计一个嘴部运动的世界在开始制作动画之前，我们必须确保准确表示与特定声音相对应的嘴形。2022-10_Viseme_Project_Image01_VisemeChart_Oscar.png字符发音嘴型图表示例我们必须以忠实于我们的 Duolingo 美学的方式设计每个口型。最重要的是，每个角色都需要为每个发音嘴型设计自己的一套形状，以遵循他们独特的个性。设计过程中最关键的部分是确保发音嘴型设计在制作动画时看起来可信。2022-10_Viseme_Project_Image02_VisemeChart_Falstaff.gif有些角色比其他角色需要更多的探索，但我们最终得到了一套适合所有人的 20+ 张嘴！一旦有了设计指南，我们就可以开始制作动画了。我们在课程中为每个角色的一般姿势创建了一个动画状态，但我们也为角色的嘴部创建了单独的状态。设置完所有动画状态后，剩下唯一要做的就是将这些动画插入 Rive 的状态机，并将它们与我们之前注释的嘴部输入组合在一起。2022-10_Viseme_Project_Image03_StateMachine_Character.png说明状态机如何用于角色动画的图表2022-10_Viseme_Project_Image04_StateMachine_Visemes.png显示嘴形如何通过 State Machine for Viseme（视素状态机）进行混合的图表。这里只有 4 个嘴，但即使有 20 多个形状，逻辑也是一样的。这些状态必须与角色动画的状态同时运行！状态机设置完成后，它会从 Rive 导出到单个运行时文件中，然后交给工程师，以便他们可以将动画集成到 App 中！放在一起当需要显示挑战时，我们检索音频和计时信息，然后使用计时触发与音频同步的动画状态机。这样可以将数据传输保持在绝对最低限度 – 远小于发送一部小电影 – 并让我们能够实时响应用户的行为。当您单击一个单词时，角色将说出该单词并为其添加动画;如果你在说完之前完成练习，角色会及时停止说话。我们还可以显示空闲行为，例如点头、眨眼和眉毛移动。最后，根据挑战的结果 - 如果你猜对或错 - 我们可以进入最终状态，显示对你的回答的反应！动画和技术的未来Duolingo 努力测试一切，这些嘴部动作也不例外。这个项目是一个有趣的实验，它使学习体验更具吸引力，并且有机会将新的软件和技术用于生产管道。看到什么可以帮助我们克服技术挑战，以便我们可以继续为应用程序制作或完善其他令人愉快的功能，这很有启发性！

链接：https://mp.weixin.qq.com/s/Kzrf6tqWRIgbzndY0Mj-Ng