<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <title>é”™è¯æ¸…é›¶æ¨¡å¼æµ‹è¯•</title>
    <style>
        body {
            font-family: 'Arial', 'Microsoft YaHei', sans-serif;
            background: #f0f4f8;
            color: #333;
            padding: 20px;
            line-height: 1.8;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: #ffffff;
            padding: 20px 40px;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }
        h1, h2, h3 {
            color: #b30000;
            border-bottom: 1px solid #e1e1e1;
            padding-bottom: 10px;
        }
        h1 { border-bottom-width: 2px; }
        .instructions {
            color: #555;
            font-size: 1.1em;
            background-color: #fffbe6;
            border-left: 5px solid #ffc107;
            padding: 10px;
            margin: 20px 0;
        }
        .word-box {
            margin-bottom: 18px;
            display: flex;
            align-items: center;
            flex-wrap: wrap;
            padding: 10px 0;
            border-bottom: 1px dashed #ccc;
        }
        .word-box label {
            flex: 1;
            min-width: 350px;
            margin-right: 15px;
            line-height: 1.5;
        }
        .tag-container {
            display: block;
            margin-bottom: 5px;
        }
        .tag {
            font-size: 0.8em;
            font-weight: bold;
            color: #fff;
            padding: 2px 8px;
            border-radius: 10px;
            margin-right: 6px;
            white-space: nowrap;
        }
        .book-tag { background-color: #17a2b8; }
        .list-tag { background-color: #28a745; }
        .count-tag { background-color: #dc3545; }
        .date-tag { background-color: #6c757d; }
        
        .pos { font-style: italic; color: #007bff; font-weight: bold; }
        .ipa { color: #d35400; font-family: "Lucida Sans Unicode", sans-serif; margin-left: 8px; }
        
        input { padding: 10px; width: 220px; border: 1px solid #ccc; border-radius: 4px; font-size: 16px; }
        
        button {
            margin-top: 20px; padding: 12px 25px; background: #007bff; border: none;
            color: white; font-weight: bold; cursor: pointer; border-radius: 5px;
            font-size: 18px; display: block; width: 100%; transition: background-color 0.2s;
        }
        button:hover { background: #0056b3; }

        .result { margin-top: 30px; padding: 20px; background: #e6f7ff; border: 1px solid #91d5ff; border-radius: 8px; }
        .final-congrats {
            margin-top: 30px; padding: 30px; background: #d4edda;
            border: 1px solid #c3e6cb; border-radius: 8px; text-align: center;
        }
        .correct { color: #28a745; font-weight: bold; }
        .incorrect { color: #dc3545; text-decoration: line-through; }
        .result-line { padding: 5px 0; font-size: 1.1em; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ã€é”™è¯æ¸…é›¶æ¨¡å¼ã€‘å†å²é”™è¯å¾ªç¯è€ƒæ ¸</h1>
        <h2 id="quiz-title">é”™è¯æ¸…é›¶è€ƒæ ¸ (å…± 5 è¯)</h2>
        <p class="instructions">
            æœ¬æ¨¡å¼å°†å¯¹é”™è¯è¿›è¡Œå¾ªç¯è€ƒæ ¸ï¼Œç›´åˆ°æ­£ç¡®ç‡è¾¾åˆ°100%ï¼
        </p>
        
        <form id="quizForm">
            <div id="wordList"></div>
            <button type="submit">æäº¤ç­”æ¡ˆå¹¶è¿›å…¥ä¸‹ä¸€è½®</button>
        </form>
    
        <div class="result" id="result" style="display:none;">
            <h2 id="result-title">æµ‹è¯•ç»“æœåˆ†æ</h2>
            <div id="result-details"></div>
        </div>
    </div>

    <script>
        // æ¨¡æ‹Ÿé”™è¯æ•°æ®
        let currentWords = [
            { book_name: "åˆä¸­è‹±è¯­è¯æ±‡", list_name: "Unit 26", error_count: 3, last_error_date: "2025-06-27", spelling: "original", pos: "adj. & n.", meaning_cn: "æœ€åˆçš„, åŸå§‹çš„; åŸä»¶" },
            { book_name: "åˆä¸­è‹±è¯­è¯æ±‡", list_name: "Unit 21", error_count: 3, last_error_date: "2025-06-25", spelling: "convenient", pos: "adj.", meaning_cn: "æ–¹ä¾¿çš„, ä¾¿åˆ©çš„" },
            { book_name: "åˆä¸­è‹±è¯­è¯æ±‡", list_name: "Unit 22", error_count: 3, last_error_date: "2025-06-25", spelling: "escalator", pos: "n.", meaning_cn: "è‡ªåŠ¨æ‰¶æ¢¯" },
            { book_name: "åˆä¸­è‹±è¯­è¯æ±‡", list_name: "Unit 22", error_count: 3, last_error_date: "2025-06-25", spelling: "nature", pos: "n.", meaning_cn: "å¤§è‡ªç„¶, æœ¬æ€§" },
            { book_name: "åˆä¸­è‹±è¯­è¯æ±‡", list_name: "Unit 25", error_count: 2, last_error_date: "2025-06-27", spelling: "unimportant", pos: "adj.", meaning_cn: "ä¸é‡è¦çš„, çç¢çš„" }
        ];

        const wordListContainer = document.getElementById('wordList');
        const form = document.getElementById('quizForm');
        const resultContainer = document.getElementById('result');
        const resultDetails = document.getElementById('result-details');
        const quizTitle = document.getElementById('quiz-title');
        let round = 1;

        function generateQuiz(words) {
            wordListContainer.innerHTML = '';
            resultContainer.style.display = 'none';
            
            let titleText = `ç¬¬ ${round} è½®è€ƒæ ¸ (å‰©ä½™ ${words.length} è¯)`;
            if(round === 1) {
                titleText = `é”™è¯æ¸…é›¶è€ƒæ ¸ (å…± ${words.length} è¯)`;
            }
            quizTitle.textContent = titleText;

            words.forEach((item, index) => {
                const wordBox = document.createElement('div');
                wordBox.className = 'word-box';
                const inputId = `word-${index}`;
                wordBox.innerHTML = `
                    <label for="${inputId}">
                        <span class="item-num">${index + 1}.</span>
                        <div class="tag-container">
                            <span class="tag book-tag">è¯ä¹¦: ${item.book_name}</span>
                            <span class="tag list-tag">å•å…ƒ: ${item.list_name}</span>
                            <span class="tag count-tag">é”™è¿‡ ${item.error_count} æ¬¡</span>
                            <span class="tag date-tag">ä¸Šæ¬¡: ${item.last_error_date}</span>
                        </div>
                        <span class="pos">${item.pos}</span> 
                        ${item.meaning_cn}ï¼š
                    </label>
                    <input type="text" id="${inputId}" autocomplete="off">
                `;
                wordListContainer.appendChild(wordBox);
            });
            if(wordListContainer.querySelector('input')) {
                wordListContainer.querySelector('input').focus();
            }
        }

        form.addEventListener('submit', function(event) {
            event.preventDefault();

            const incorrectWords = [];
            let correctCount = 0;

            resultDetails.innerHTML = '';

            currentWords.forEach((item, index) => {
                const inputElement = document.getElementById(`word-${index}`);
                const userAnswer = inputElement.value.trim();
                const correctAnswer = item.spelling;

                const resultLine = document.createElement('div');
                resultLine.className = 'result-line';
                
                if (userAnswer.toLowerCase() === correctAnswer.toLowerCase()) {
                    correctCount++;
                    resultLine.innerHTML = `<span class="correct">âœ” æ­£ç¡®: ${correctAnswer}</span>`;
                } else {
                    incorrectWords.push(item);
                    resultLine.innerHTML = `âœ˜ é”™è¯¯: "${correctAnswer}" â€” ä½ çš„ç­”æ¡ˆ: <span class="incorrect">${userAnswer || 'ï¼ˆæœªå¡«å†™ï¼‰'}</span>`;
                }
                resultDetails.appendChild(resultLine);
            });

            // æ˜¾ç¤ºç»“æœåˆ†æ
            const summary = document.createElement('h3');
            const overallPercentage = Math.round((correctCount / currentWords.length) * 100);
            summary.textContent = `ç¬¬ ${round} è½®æ€»ç»“: ç­”å¯¹ ${correctCount} / ${currentWords.length} ä¸ªå•è¯ï¼Œæ­£ç¡®ç‡: ${overallPercentage}%`;
            resultDetails.prepend(summary);
            
            resultContainer.style.display = 'block';

            // å‡†å¤‡ä¸‹ä¸€è½®
            if (incorrectWords.length > 0) {
                currentWords = incorrectWords;
                round++;
                setTimeout(() => {
                    generateQuiz(currentWords);
                }, 3000);
            } else {
                setTimeout(() => {
                    wordListContainer.innerHTML = `
                        <div class="final-congrats">
                            <h1>ğŸ‰ æ­å–œï¼</h1>
                            <p>æ‰€æœ‰é”™è¯å·²å…¨éƒ¨æŒæ¡ï¼Œæœ¬æ¬¡å­¦ä¹ ä»»åŠ¡å®Œæˆï¼</p>
                            <p>å…±å®Œæˆ ${round} è½®è€ƒæ ¸</p>
                        </div>`;
                    form.style.display = 'none';
                }, 3000);
            }
        });

        // åˆå§‹ç”Ÿæˆç¬¬ä¸€è½®è€ƒæ ¸
        generateQuiz(currentWords);
    </script>
</body>
</html> 